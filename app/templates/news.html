{% extends "base.html" %}

{% block title %}News Management{% endblock %}

{% block content %}
<div class="container">
    <h1>News Management</h1>

    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 2rem;">
        <div>
            <h3>Create News Article</h3>
            <form hx-post="/news" hx-target="#news-list" hx-on::after-request="this.reset()">
                <div class="form-group">
                    <label>Title:</label>
                    <input type="text" name="title" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Content (JSON):</label>
                    <textarea name="content" class="form-control" rows="4" required>{
  "blocks": [
    {
      "type": "paragraph", 
      "text": "Your news content here..."
    }
  ]
}</textarea>
                    <small class="form-text text-muted">
                        Use valid JSON format. Example above shows the required structure.
                    </small>
                </div>
                <div class="form-group">
                    <label>Cover Image URL:</label>
                    <input type="url" name="cover" class="form-control" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <label>Author ID:</label>
                    <input type="number" name="author_id" class="form-control" required min="1" placeholder="1">
                    <small class="form-text text-muted">
                        Enter the ID of a verified user. Create a user first if needed.
                    </small>
                </div>
                <button type="submit" class="btn btn-primary">Create News</button>
            </form>
        </div>

        <div>
            <h3>News Articles</h3>
            <div id="news-list" hx-get="/api/news" hx-trigger="load">
                <div class="loading">Loading news...</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
